{"version":3,"sources":["webpack:///webpack/bootstrap 4f86e8bf65461ca910af","webpack:///external \"mongoose\"","webpack:///./~/_babel-runtime@6.26.0@babel-runtime/regenerator/index.js","webpack:///./utils/config.js","webpack:///./middleware/utilFun.js","webpack:///external \"path-to-regexp\"","webpack:///./server/models/index.js","webpack:///./server/proxys/user.js","webpack:///external \"lodash\"","webpack:///./nuxt.config.js","webpack:///./server/routers/index.js","webpack:///./utils/logger.js","webpack:///external \"@koa/cors\"","webpack:///external \"koa\"","webpack:///external \"koa-body\"","webpack:///external \"koa-jwt\"","webpack:///external \"koa-onerror\"","webpack:///external \"koa-proxies\"","webpack:///external \"koa2-validator\"","webpack:///external \"nuxt\"","webpack:///./server/controllers/index.js","webpack:///./server/controllers/mock.js","webpack:///./server/controllers/user.js","webpack:///./server/models/fields_table.js","webpack:///./server/models/group.js","webpack:///./server/models/mock.js","webpack:///./server/models/mock_count.js","webpack:///./server/models/project.js","webpack:///./server/models/project_group.js","webpack:///./server/models/user.js","webpack:///./server/models/user_group.js","webpack:///./server/models/user_project.js","webpack:///./server/proxys/index.js","webpack:///./server/proxys/project.js","webpack:///./utils/mix.js","webpack:///external \"bcryptjs\"","webpack:///external \"fs\"","webpack:///external \"js-beautify/js/lib/beautify\"","webpack:///external \"jsonwebtoken\"","webpack:///external \"koa-pino-logger\"","webpack:///external \"koa-router\"","webpack:///external \"mkdirp\"","webpack:///external \"moment\"","webpack:///external \"path\"","webpack:///external \"pino-multi-stream\"","webpack:///external \"prettify-markdown\"","webpack:///external \"regenerator-runtime\"","webpack:///external \"restc\"","webpack:///external \"uuid\"","webpack:///./server/index.js"],"names":["appName","appMiniName","whiteList","apiBaseURL","server","mongodb","jwtSecret","jwtExpire","codeMap","utilFn","resuccess","data","code","success","message","refail","UtilFunMiddleware","ctx","next","set","req","id","util","pathNode","pathToRegexp","exec","path","throw","projectId","mockURL","mongoose","Promise","global","connect","config","poolSize","err","console","error","process","exit","gravatar","UserProxy","name","password","nickName","headImg","user","len","length","nick_name","_","now","head_img","random","save","User","update","_id","$set","userName","findOne","userId","findById","query","opt","find","module","exports","head","title","meta","charset","content","hid","link","rel","type","href","css","plugins","loading","color","router","middleware","build","extend","isClient","rules","push","enforce","test","loader","exclude","mockRouter","prefix","apiRouter","post","login","register","get","profile","streamOpt","flags","encoding","date","moment","format","logDir","join","__dirname","streams","level","stream","stdout","stderr","fs","existsSync","mkdirp","sync","createWriteStream","koaPinoLogger","genReqId","headers","uuid","v4","multistream","mock","getMockAPI","html","body","UserController","checkBody","notEmpty","value","_validationErrors","newPassword","MixUtil","bhash","newAndSave","getByName","verifyPassword","bcompare","token","jwt","sign","uid","expiresIn","pick","ft","getById","state","group","projectExtend","project","Schema","schema","Types","ObjectId","ref","String","unique","create_at","Date","default","index","model","project_group","request","base","method","url","description","parameters","key","must","isEdit","Boolean","isChecked","kvData","rawType","rawData","rawDataMD","response","bodyMD","mockjs","count","Number","collection","swagger_url","members","is_workbench","ProjectProxy","docs","Project","insertMany","projects","doc","remove","str","trim","jsBeautify","js_beautify","indent_size","mdPrettify","msg","confirm","bcrypt","hashSync","hash","compareSync","decodeURIComponent","e","restURL","fullURL","params","paramNames","api","captures","match","slice","forEach","i","safeDecodeURIComponent","log","app","host","env","HOST","port","PORT","require","dev","nuxt","builder","onerror","use","validator","cors","credentials","maxAge","koaJwt","secret","cfg","unless","koaBody","multipart","routes","allowedMethods","status","resolve","reject","res","on","render","promise","then","catch","listen","start"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 48);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4f86e8bf65461ca910af","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_babel-runtime@6.26.0@babel-runtime/regenerator/index.js\n// module id = 1\n// module chunks = 0","export default {\n  appName: 'mockServer',\n  appMiniName: 'M',\n  whiteList: ['/login'],\n  apiBaseURL: '/api',\n  server: {\n    mongodb: 'mongodb://hans:123@localhost/mock-server',\n    jwtSecret: 'shared-secret',\n    jwtExpire: '14 days'\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./utils/config.js","import pathToRegexp from 'path-to-regexp'\n\nconst codeMap = {\n  '-1': 'fail',\n  '200': 'success',\n  '401': 'token expired',\n  '500': 'server error',\n  '10001': 'params error'\n}\n\nconst utilFn = {\n  resuccess(data) {\n    return {\n      code: 200,\n      success: true,\n      message: codeMap['200'],\n      data: data || null\n    }\n  },\n  refail(message, code, data) {\n    return {\n      code: code || -1,\n      success: false,\n      message: message || codeMap[code],\n      data: data || null\n    }\n  }\n}\n\nexport default class UtilFunMiddleware {\n  static util(ctx, next) {\n    ctx.set('X-Request-Id', ctx.req.id)\n    ctx.util = utilFn\n    return next()\n  }\n\n  // static ipFilter (ctx, next) {\n  //   if (ipFilter(ctx.ip, blackIPs, {strict: false})) {\n  //     ctx.body = utilFn.refail('请求频率太快，已被限制访问')\n  //     return\n  //   }\n  //   return next()\n  // }\n\n  static mockFilter(ctx, next) {\n    const pathNode = pathToRegexp('/mock/:projectId(.{24})/:mockURL*').exec(\n      ctx.path\n    )\n\n    if (!pathNode) ctx.throw(404)\n\n    ctx.pathNode = {\n      projectId: pathNode[1],\n      mockURL: '/' + (pathNode[2] || '')\n    }\n\n    return next()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./middleware/utilFun.js","module.exports = require(\"path-to-regexp\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path-to-regexp\"\n// module id = 4\n// module chunks = 0","/*\n * @Author: hans.taozhiwei \n * @Date: 2018-03-06 14:19:57 \n * @Last Modified by: hans.taozhiwei\n * @Last Modified time: 2018-03-06 14:22:55\n */\n\nimport mongoose from 'mongoose'\nimport config from './../../utils/config'\n\nimport User from './user'\nimport Mock from './mock'\nimport Group from './group'\nimport Project from './project'\nimport ProjectGroup from './project_group'\nimport MockCount from './mock_count'\nimport UserGroup from './user_group'\nimport UserProject from './user_project'\n\nmongoose.Promise = global.Promise\nmongoose.connect(\n  config.server.mongodb,\n  {\n    // useMongoClient: true,\n    poolSize: 20\n  },\n  err => {\n    /* istanbul ignore if */\n    if (err) {\n      console.error('connect to %s error: ', config.server.mongodb, err.message)\n      process.exit(1)\n    }\n  }\n)\n\nexport {\n  User,\n  Mock,\n  Group,\n  Project,\n  ProjectGroup,\n  MockCount,\n  UserGroup,\n  UserProject\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/index.js","/*\n * @Author: hans.taozhiwei \n * @Date: 2018-03-06 14:21:18 \n * @Last Modified by: hans.taozhiwei\n * @Last Modified time: 2018-03-06 14:29:58\n */\n\nimport _ from 'lodash'\nimport {User} from './../models'\n\nconst gravatar = [\n  '//img.souche.com/20161230/png/58f22ad636a0f33bad8762688f78d425.png',\n  '//img.souche.com/20161230/png/6cdcda90c2f86ba1f45393cf5b26e324.png',\n  '//img.souche.com/20161230/png/f9d10bb683d940dd14dc1b1344e89568.png',\n  '//img.souche.com/20161230/png/8bb4f0fd45ed6ae26533eadd85f0f7ea.png',\n  '//img.souche.com/20161230/png/0795744371fd5869af6cab796bdacb95.png',\n  '//img.souche.com/20161230/png/bc836261fbb654dda6b653e428014279.png',\n  '//img.souche.com/20161230/png/fd9f8aecab317e177655049a49b64d02.png'\n]\n\nexport default class UserProxy {\n  static newAndSave(name, password, nickName, headImg) {\n    const user = new User()\n    const len = gravatar.length\n\n    user.name = name\n    user.password = password\n    user.nick_name = nickName || _.now()\n    user.head_img = headImg || gravatar[_.random(0, len - 1)]\n\n    return user.save()\n  }\n\n  static update(user) {\n    return User.update(\n      {\n        _id: user.id\n      },\n      {\n        $set: {\n          nick_name: user.nick_name,\n          head_img: user.head_img,\n          password: user.password\n        }\n      }\n    )\n  }\n\n  static getByName(userName) {\n    return User.findOne({name: userName})\n  }\n\n  static getById(userId) {\n    return User.findById(userId)\n  }\n\n  static find(query, opt) {\n    return User.find(query, {}, opt)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/proxys/user.js","module.exports = require(\"lodash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = 7\n// module chunks = 0","module.exports = {\n  /*\n  ** Headers of the page\n  */\n  head: {\n    title: 'mock server',\n    meta: [\n      { charset: 'utf-8' },\n      { name: 'viewport', content: 'width=device-width, initial-scale=1' },\n      { hid: 'description', name: 'description', content: 'Nuxt.js project' }\n    ],\n    link: [\n      { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' }\n    ]\n    // script: [\n    //   { src: 'jquery/dist/jquery.min.js' }\n    // ]\n  },\n  /*\n  ** Global CSS\n  */\n  css: ['~assets/css/main.css'],\n  /*\n  ** plugins\n  */\n  plugins: ['~plugins/index'],\n  /*\n  ** Customize the progress-bar color\n  */\n  loading: { color: '#3B8070' },\n  /*\n  ** router middleware\n  */\n  router: {\n    middleware: 'currentRoute'\n  },\n  /*\n   ** Build configuration\n   */\n  build: {\n    /*\n     ** Run ESLINT on save\n     */\n    extend (config, ctx) {\n      if (ctx.isClient) {\n        config.module.rules.push({\n          enforce: 'pre',\n          test: /\\.(js|vue)$/,\n          loader: 'eslint-loader',\n          exclude: /(node_modules)/\n        })\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./nuxt.config.js","import Router from 'koa-router'\nimport restc from 'restc'\nimport {user, mock} from './../controllers'\nimport utilFun from './../../middleware/utilFun'\n\n// import mock from './../controllers/mock'\n\n// import c2k from 'koa2-connect'\n// import proxy from 'http-proxy-middleware'\n// import cfg from './../../utils/config'\n\nlet mockRouter = new Router({prefix: '/mock'})\n  // .all('*', utilFun.mockFilter, restc.koa2(), mock.getMockAPI)\n\nlet apiRouter = new Router({prefix: '/api'})\n  .post('/u/login', user.login)\n  .post('/u/register', user.register)\n  .get('/u/profile', user.profile)\n\nexport {mockRouter, apiRouter}\n\n\n\n// WEBPACK FOOTER //\n// ./server/routers/index.js","/*\n * @Author: hans.taozhiwei \n * @Date: 2018-03-07 16:08:06 \n * @Last Modified by: hans.taozhiwei\n * @Last Modified time: 2018-03-07 17:27:08\n */\n\nimport fs from 'fs'\nimport uuid from 'uuid'\nimport path from 'path'\nimport mkdirp from 'mkdirp'\nimport moment from 'moment'\nimport koaPinoLogger from 'koa-pino-logger'\nimport {multistream} from 'pino-multi-stream'\n\nconst streamOpt = {flags: 'a', encoding: 'utf8'}\nconst date = moment().format('YYYY-MM-DD')\nconst logDir = path.join(__dirname, '../logs')\nlet streams = [\n  {level: 'info', stream: process.stdout},\n  {level: 'error', stream: process.stderr}\n]\n\n/* istanbul ignore if */\nif (process.env.NODE_ENV === 'production') {\n  if (!fs.existsSync(logDir)) mkdirp.sync(logDir)\n\n  streams = [\n    {\n      level: 'info',\n      stream: fs.createWriteStream(`logs/${date}-info.log`, streamOpt)\n    },\n    {\n      level: 'error',\n      stream: fs.createWriteStream(`logs/${date}-error.log`, streamOpt)\n    }\n  ]\n}\n\nexport default koaPinoLogger(\n  {\n    name: 'Mock Server',\n    level:\n      process.env.NODE_ENV === 'test'\n        ? 'silent'\n        : /* istanbul ignore next */ 'info',\n    genReqId: req => req.headers['x-request-id'] || uuid.v4()\n  },\n  multistream(streams)\n)\n\n\n\n// WEBPACK FOOTER //\n// ./utils/logger.js","module.exports = require(\"@koa/cors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@koa/cors\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"koa\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"koa-body\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-body\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"koa-jwt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-jwt\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"koa-onerror\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-onerror\"\n// module id = 15\n// module chunks = 0","module.exports = require(\"koa-proxies\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-proxies\"\n// module id = 16\n// module chunks = 0","module.exports = require(\"koa2-validator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa2-validator\"\n// module id = 17\n// module chunks = 0","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 18\n// module chunks = 0","/*\n * @Author: hans.taozhiwei \n * @Date: 2018-03-06 14:19:27 \n * @Last Modified by:   hans.taozhiwei \n * @Last Modified time: 2018-03-06 14:19:27 \n */\n\nimport user from './user'\nimport mock from './mock'\n\nexport {user, mock}\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/index.js","/*\n * @Author: hans.taozhiwei \n * @Date: 2018-03-06 14:19:33 \n * @Last Modified by:   hans.taozhiwei \n * @Last Modified time: 2018-03-06 14:19:33 \n */\n\nconst mock = {\n  async getMockAPI(ctx, next) {\n    let html = `\n    <ul>\n      <li><a href=\"/page/helloworld\">/page/helloworld</a></li>\n      <li><a href=\"/page/404\">/page/404</a></li>\n    </ul>\n  `\n    ctx.body = html\n  }\n}\n\nexport default mock\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/mock.js","/*\n * @Author: hans.taozhiwei \n * @Date: 2018-03-06 13:40:55 \n * @Last Modified by: hans.taozhiwei\n * @Last Modified time: 2018-03-07 17:51:52\n */\nimport _ from 'lodash'\nimport jwt from 'jsonwebtoken'\n\nimport {UserProxy} from './../proxys'\nimport MixUtil from './../../utils/mix'\nimport ft from './../models/fields_table'\nimport config from './../../utils/config'\n\n/**\n * 用户控制器\n *\n * @export\n * @class UserController\n */\nexport default class UserController {\n  /**\n   * 用户注册\n   *\n   * @static\n   * @param {any} ctx\n   * @memberof UserController\n   */\n  static async register(ctx) {\n    const name = ctx\n      .checkBody('name')\n      .notEmpty()\n      .len(4, 20).value\n    const password = ctx\n      .checkBody('password')\n      .notEmpty()\n      .len(6, 20).value\n\n    if (ctx._validationErrors.length) {\n      ctx.body = ctx.util.refail(null, 10001, ctx._validationErrors)\n      return\n    }\n\n    const newPassword = MixUtil.bhash(password)\n    let user = await UserProxy.newAndSave(name, newPassword)\n    ctx.body = ctx.util.resuccess()\n  }\n\n  /**\n   * 用户登录\n   *\n   * @static\n   * @param {any} ctx\n   * @memberof UserController\n   */\n  static async login(ctx) {\n    const name = ctx.checkBody('name').notEmpty().value\n    const password = ctx.checkBody('password').notEmpty().value\n\n    if (ctx._validationErrors.length) {\n      ctx.body = ctx.util.refail(null, 10001, ctx._validationErrors)\n      return\n    }\n\n    const user = await UserProxy.getByName(name)\n\n    if (!user) {\n      ctx.body = ctx.util.refail('用户不存在')\n      return\n    }\n\n    const verifyPassword = MixUtil.bcompare(password, user.password)\n\n    if (!verifyPassword) {\n      ctx.body = ctx.util.refail('用户名或密码错误')\n      return\n    }\n\n    user.token = jwt.sign({uid: user._id}, config.server.jwtSecret, {\n      expiresIn: config.server.jwtExpire\n    })\n\n    ctx.body = ctx.util.resuccess(_.pick(user, ft.user))\n  }\n\n  /**\n   * 离线 用户信息\n   *\n   * @static\n   * @param {any} ctx\n   * @memberof UserController\n   */\n  static async profile(ctx) {\n    // const token = ctx\n    //   .checkHeaders('Authorization')\n    //   .notEmpty()\n    //   .value.replace('Bearer ', '')\n\n    // if (ctx._validationErrors.length) {\n    //   ctx.body = ctx.util.refail(null, 10001, ctx._validationErrors)\n    //   return\n    // }\n\n    const user = await UserProxy.getById(ctx.state.user.uid)\n    if (!user) {\n      ctx.body = ctx.util.refail('用户不存在')\n      return\n    }\n\n    ctx.body = ctx.util.resuccess(_.pick(user, ft.user))\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/user.js","/*\n * @Author: hans.taozhiwei \n * @Date: 2018-03-07 14:11:44 \n * @Last Modified by: hans.taozhiwei\n * @Last Modified time: 2018-03-07 14:12:29\n */\n\nexport default {\n  group: ['_id', 'name'],\n  projectExtend: ['_id', 'is_workbench'],\n  user: ['_id', 'name', 'nick_name', 'head_img', 'token'],\n  mock: [\n    '_id',\n    'url',\n    'method',\n    'description',\n    'mode',\n    'parameters',\n    'response_model'\n  ],\n  project: [\n    '_id',\n    'name',\n    'url',\n    'description',\n    'swagger_url',\n    'members',\n    'extend',\n    'group'\n  ]\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/fields_table.js","/*\n * @Author: hans.taozhiwei \n * @Date: 2018-03-06 14:19:51 \n * @Last Modified by:   hans.taozhiwei \n * @Last Modified time: 2018-03-06 14:19:51 \n */\n\nimport mongoose from 'mongoose'\n\nconst Schema = mongoose.Schema\n\nconst schema = new Schema({\n  user: {\n    type: Schema.Types.ObjectId,\n    ref: 'User'\n  },\n  name: {\n    type: String,\n    unique: true\n  },\n  create_at: {\n    type: Date,\n    default: Date.now\n  }\n})\n\nschema.index({ user: 1, create_at: -1 })\nschema.index({ name: 1 }, { unique: true })\n\nexport default mongoose.model('Group', schema)\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/group.js","/*\n * @Author: hans.taozhiwei \n * @Date: 2018-03-06 14:20:06 \n * @Last Modified by:   hans.taozhiwei \n * @Last Modified time: 2018-03-06 14:20:06 \n */\n\nimport mongoose from 'mongoose'\n\nconst Schema = mongoose.Schema\n\nconst schema = new Schema({\n  project_group: {\n    type: Schema.Types.ObjectId,\n    ref: 'ProjectGroup'\n  },\n  request: {\n    base: {\n      group: String,\n      method: String,\n      url: String,\n      description: String\n    },\n    parameters: [\n      {\n        key: String,\n        value: String,\n        description: String,\n        type: {type: String, default: 'string'},\n        must: {type: String, default: 'yes'},\n        isEdit: {type: Boolean, default: true},\n        isChecked: {type: Boolean, default: false}\n      }\n    ],\n    headers: [\n      {\n        key: String,\n        value: String,\n        description: String,\n        type: {type: String, default: 'string'},\n        must: {type: String, default: 'yes'},\n        isEdit: {type: Boolean, default: true},\n        isChecked: {type: Boolean, default: false}\n      }\n    ],\n    body: {\n      type: String,\n      kvData: [\n        {\n          key: String,\n          value: String,\n          description: String,\n          type: {type: String, default: 'string'},\n          must: {type: String, default: 'yes'},\n          isEdit: {type: Boolean, default: true},\n          isChecked: {type: Boolean, default: false}\n        }\n      ],\n      rawType: String,\n      rawData: String,\n      rawDataMD: String\n    }\n  },\n  response: {\n    body: String,\n    bodyMD: String,\n    mockjs: String,\n    headers: [\n      {\n        key: String,\n        value: String,\n        description: String,\n        type: {type: String, default: 'string'},\n        must: {type: String, default: 'yes'},\n        isEdit: {type: Boolean, default: true},\n        isChecked: {type: Boolean, default: false}\n      }\n    ]\n  },\n  create_at: {\n    type: Date,\n    default: Date.now\n  }\n})\n\nschema.index({project_group: 1, create_at: -1})\n\nexport default mongoose.model('Mock', schema)\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/mock.js","/*\n * @Author: hans.taozhiwei \n * @Date: 2018-03-06 14:20:01 \n * @Last Modified by:   hans.taozhiwei \n * @Last Modified time: 2018-03-06 14:20:01 \n */\n\nimport mongoose from 'mongoose'\n\nconst Schema = mongoose.Schema\n\nconst schema = new Schema(\n  {\n    mock: {\n      type: Schema.Types.ObjectId,\n      ref: 'Mock'\n    },\n    count: Number,\n    create_at: {\n      type: Date,\n      default: Date.now\n    }\n  },\n  {\n    collection: 'mock_counts'\n  }\n)\n\nschema.index({mock: 1, create_at: -1})\n\nmodule.exports = mongoose.model('MockCount', schema)\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/mock_count.js","/*\n * @Author: hans.taozhiwei \n * @Date: 2018-03-06 14:20:15 \n * @Last Modified by:   hans.taozhiwei \n * @Last Modified time: 2018-03-06 14:20:15 \n */\n\nimport mongoose from 'mongoose'\n\nconst Schema = mongoose.Schema\nconst ObjectId = Schema.Types.ObjectId\n\nconst schema = new Schema({\n  user: {\n    type: ObjectId,\n    ref: 'User'\n  },\n  group: {\n    type: ObjectId,\n    ref: 'Group'\n  },\n  name: String,\n  url: String,\n  description: {\n    type: String,\n    default: ''\n  },\n  swagger_url: {\n    type: String,\n    default: ''\n  },\n  members: [\n    {\n      type: ObjectId,\n      ref: 'User',\n      default: []\n    }\n  ],\n  create_at: {\n    type: Date,\n    default: Date.now\n  }\n})\n\nschema.index({user: 1, members: 1, create_at: -1})\n\nexport default mongoose.model('Project', schema)\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/project.js","/*\n * @Author: hans.taozhiwei \n * @Date: 2018-03-06 14:20:10 \n * @Last Modified by:   hans.taozhiwei \n * @Last Modified time: 2018-03-06 14:20:10 \n */\n\nimport mongoose from 'mongoose'\n\nconst Schema = mongoose.Schema\n\nconst schema = new Schema({\n  project: {\n    type: Schema.Types.ObjectId,\n    ref: 'Project'\n  },\n  name: {\n    type: String,\n    unique: true\n  },\n  create_at: {\n    type: Date,\n    default: Date.now\n  }\n})\n\nschema.index({ project: 1, create_at: -1 })\n\nexport default mongoose.model('ProjectGroup', schema)\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/project_group.js","/*\n * @Author: hans.taozhiwei \n * @Date: 2018-03-06 14:20:33 \n * @Last Modified by:   hans.taozhiwei \n * @Last Modified time: 2018-03-06 14:20:33 \n */\n\nimport mongoose from 'mongoose'\n\nconst Schema = mongoose.Schema\nconst schema = new Schema({\n  nick_name: String,\n  head_img: String,\n  name: String,\n  password: String,\n  create_at: {\n    type: Date,\n    default: Date.now\n  }\n})\n\nschema.index({ name: 1 }, { unique: true })\n\nexport default mongoose.model('User', schema)\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/user.js","/*\n * @Author: hans.taozhiwei \n * @Date: 2018-03-06 14:20:22 \n * @Last Modified by:   hans.taozhiwei \n * @Last Modified time: 2018-03-06 14:20:22 \n */\n\nimport mongoose from 'mongoose'\n\nconst Schema = mongoose.Schema\n\nconst schema = new Schema({\n  user: {\n    type: Schema.Types.ObjectId,\n    ref: 'User'\n  },\n  group: {\n    type: Schema.Types.ObjectId,\n    ref: 'Group'\n  },\n  create_at: {\n    type: Date,\n    default: Date.now\n  }\n}, {\n  collection: 'user_group'\n})\n\nschema.index({ group: 1, user: 1 }, { unique: true })\n\nexport default mongoose.model('UserGroup', schema)\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/user_group.js","/*\n * @Author: hans.taozhiwei \n * @Date: 2018-03-06 14:20:27 \n * @Last Modified by:   hans.taozhiwei \n * @Last Modified time: 2018-03-06 14:20:27 \n */\n\nimport mongoose from 'mongoose'\n\nconst Schema = mongoose.Schema\n\nconst schema = new Schema({\n  user: {\n    type: Schema.Types.ObjectId,\n    ref: 'User'\n  },\n  project: {\n    type: Schema.Types.ObjectId,\n    ref: 'Project'\n  },\n  is_workbench: { // 工作台\n    type: Boolean,\n    default: false\n  },\n  create_at: {\n    type: Date,\n    default: Date.now\n  }\n}, {\n  collection: 'user_project'\n})\n\nschema.index({ project: 1, user: 1 }, { unique: true })\n\nexport default mongoose.model('UserProject', schema)\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/user_project.js","/*\n * @Author: hans.taozhiwei \n * @Date: 2018-03-06 14:19:16 \n * @Last Modified by:   hans.taozhiwei \n * @Last Modified time: 2018-03-06 14:19:16 \n */\n\nimport UserProxy from './user'\nimport ProjectProxy from './project'\n\nexport {UserProxy, ProjectProxy}\n\n\n\n// WEBPACK FOOTER //\n// ./server/proxys/index.js","/*\n * @Author: hans.taozhiwei \n * @Date: 2018-03-06 14:21:08 \n * @Last Modified by:   hans.taozhiwei \n * @Last Modified time: 2018-03-06 14:21:08 \n */\n\nimport {Project} from './../models'\nimport UserProxy from './user'\n\nexport default class ProjectProxy {\n  static async newAndSave(docs) {\n    const projects = await Project.insertMany(docs)\n    return projects\n  }\n\n  static findByName(name) {\n    return Project.findOne({name})\n  }\n\n  static findOne(query) {\n    return Project.findOne(query)\n  }\n\n  static find(query) {\n    return Project.find(query, {})\n  }\n\n  static updateById(id, doc) {\n    return Project.update({_id: id}, {$set: doc})\n  }\n\n  static del(query) {\n    return Project.remove(query)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/proxys/project.js","import jsBeautify from 'js-beautify/js/lib/beautify'\nimport mdPrettify from 'prettify-markdown'\nimport bcrypt from 'bcryptjs'\n\n/**\n * 工具函数\n * \n * @export\n * @class MixUtil\n */\nexport default class MixUtil {\n  /**\n   * 格式化json\n   *\n   * @static\n   * @param {any} str\n   * @returns\n   * @memberof MixUtil\n   */\n  static formatJson(str) {\n    str = str.trim()\n    if (str === '') {\n      return str\n    }\n    try {\n      return jsBeautify.js_beautify(str, {indent_size: 2})\n      // let obj = JSON.parse(str)\n      // return JSON.stringify(obj, null, 4)\n    } catch (err) {\n      return str\n    }\n  }\n\n  /**\n   * 格式化 markdown\n   *\n   * @static\n   * @param {any} str\n   * @returns\n   * @memberof MixUtil\n   */\n  static formatMarkdown(str) {\n    str = str.trim()\n    if (str === '') {\n      return str\n    }\n    return mdPrettify(str)\n  }\n\n  /**\n   * 删除确认\n   *\n   * @static\n   * @returns\n   * @memberof MixUtil\n   */\n  static delConfirm() {\n    const msg = '您真的确定要删除吗？\\n\\n请确认！'\n    return confirm(msg)\n  }\n\n  /**\n   * 加密字符串\n   * \n   * @static\n   * @param {any} str \n   * @returns \n   * @memberof MixUtil\n   */\n  static bhash(str) {\n    return bcrypt.hashSync(str, 8)\n  }\n\n  /**\n   * 对比原字符串与经过加密的字符串是否相同\n   * \n   * @static\n   * @param {any} str \n   * @param {any} hash \n   * @returns \n   * @memberof MixUtil\n   */\n  static bcompare(str, hash) {\n    return bcrypt.compareSync(str, hash)\n  }\n\n  /**\n   * 安全的 decodeURIComponent\n   * \n   * @static\n   * @param {any} str \n   * @returns \n   * @memberof MixUtil\n   */\n  static safeDecodeURIComponent(str) {\n    try {\n      return decodeURIComponent(str)\n    } catch (e) {\n      return str\n    }\n  }\n\n  /**\n   * 解析出 params 对象\n   *\n   * /user/nick (/user/:name) => { name: 'nick' }\n   *\n   * @param String restURL /user/:name\n   * @param String fullURL /user/nick\n   */\n  static params(restURL, fullURL) {\n    const params = {}\n    const paramNames = []\n    const api = pathToRegexp(restURL, paramNames)\n    const captures = fullURL.match(api)\n\n    if (!captures) return {}\n\n    captures.slice(1).forEach((value, i) => {\n      /* istanbul ignore else */\n      if (paramNames[i]) {\n        params[paramNames[i].name] = this.safeDecodeURIComponent(value)\n      }\n    })\n\n    return params\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./utils/mix.js","module.exports = require(\"bcryptjs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bcryptjs\"\n// module id = 34\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 35\n// module chunks = 0","module.exports = require(\"js-beautify/js/lib/beautify\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"js-beautify/js/lib/beautify\"\n// module id = 36\n// module chunks = 0","module.exports = require(\"jsonwebtoken\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsonwebtoken\"\n// module id = 37\n// module chunks = 0","module.exports = require(\"koa-pino-logger\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-pino-logger\"\n// module id = 38\n// module chunks = 0","module.exports = require(\"koa-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-router\"\n// module id = 39\n// module chunks = 0","module.exports = require(\"mkdirp\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mkdirp\"\n// module id = 40\n// module chunks = 0","module.exports = require(\"moment\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"moment\"\n// module id = 41\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 42\n// module chunks = 0","module.exports = require(\"pino-multi-stream\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"pino-multi-stream\"\n// module id = 43\n// module chunks = 0","module.exports = require(\"prettify-markdown\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"prettify-markdown\"\n// module id = 44\n// module chunks = 0","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 45\n// module chunks = 0","module.exports = require(\"restc\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"restc\"\n// module id = 46\n// module chunks = 0","module.exports = require(\"uuid\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"uuid\"\n// module id = 47\n// module chunks = 0","import Koa from 'koa'\nimport {Nuxt, Builder} from 'nuxt'\nimport proxy from 'koa-proxies'\nimport koaBody from 'koa-body'\n// import restc from 'restc'\nimport validator from 'koa2-validator'\nimport onerror from 'koa-onerror'\nimport koaJwt from 'koa-jwt'\nimport cors from '@koa/cors'\nimport pathToRegexp from 'path-to-regexp'\n\nimport {mockRouter, apiRouter} from './routers'\nimport cfg from './../utils/config'\nimport UtilFunMiddleware from './../middleware/utilFun'\nimport logger from './../utils/logger'\n\nasync function start() {\n  console.log(`process.env.NODE_ENV => ${process.env.NODE_ENV}`)\n  \n  const app = new Koa()\n  const host = process.env.HOST || '127.0.0.1'\n  const port = process.env.PORT || 3000\n\n  // Import and Set Nuxt.js options\n  let config = require('../nuxt.config.js')\n  config.dev = !(app.env === 'production')\n\n  // Instantiate nuxt.js\n  const nuxt = new Nuxt(config)\n\n  // Build in development\n  if (config.dev) {\n    const builder = new Builder(nuxt)\n    await builder.build()\n  }\n\n  onerror(app)\n  // validator(app)\n\n  // 中间件\n  app\n    .use(validator())\n    // .use(restc.koa2())\n    .use(logger)\n    .use(UtilFunMiddleware.util)\n    .use(cors({ credentials: true, maxAge: 2592000 }))\n    .use(koaJwt({ secret: cfg.server.jwtSecret }).unless((ctx) => {\n      if (/^\\/api/.test(ctx.path)) {\n        return pathToRegexp([\n          '/api/u/login',\n          '/api/u/register'\n        ]).test(ctx.path)\n      }\n      return true\n    }))\n    .use(koaBody({multipart: true}))\n    .use(mockRouter.routes())\n    .use(mockRouter.allowedMethods())\n    .use(apiRouter.routes())\n    .use(apiRouter.allowedMethods())\n\n  // http status 404 改 200\n  app.use(async (ctx, next) => {\n    await next()\n    ctx.status = 200 // koa defaults to 404 when it sees that status is unset\n    return new Promise((resolve, reject) => {\n      ctx.res.on('close', resolve)\n      ctx.res.on('finish', resolve)\n      nuxt.render(ctx.req, ctx.res, promise => {\n        // nuxt.render passes a rejected promise into callback on error.\n        promise.then(resolve).catch(reject)\n      })\n    })\n  })\n\n  // 代理\n  // app.use(proxy(/^\\/api\\//, {\n  //     target: 'https://www.easy-mock.com/mock/5a7bac516347684a0857e274/mserver',\n  //     changeOrigin: true,\n  //     rewrite: path => path.replace('/api', ''),\n  //     logs: true\n  //   }))\n\n  app.listen(port, host)\n  console.log('Server listening on ' + host + ':' + port) // eslint-disable-line no-console\n}\n\nstart()\n\n\n\n// WEBPACK FOOTER //\n// ./server/index.js"],"sourceRoot":""}